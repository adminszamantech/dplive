'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var utils = require('./utils.js');

var getYearIN = function (year, month, day) {
    var julianDate = utils.getJulianDate(year, month + 1, day);
    if (julianDate < utils.startJulianDate) {
        throw new Error(utils.errorMessage);
    }
    return Math.floor((julianDate - utils.startJulianDate) / utils.yearLength) + 1;
};
function getYear(date, options) {
    if (date === void 0) { date = new Date(); }
    if (options === void 0) { options = { format: 'YYYY', calculationMethod: 'BD' }; }
    if (!utils.isValidDate(date)) {
        throw new Error(utils.errorMessage);
    }
    var inputDate = new Date(date);
    var day = inputDate.getUTCDate();
    var month = inputDate.getMonth();
    var year = inputDate.getFullYear();
    var format = options.format, _a = options.calculationMethod, calculationMethod = _a === void 0 ? 'BD' : _a;
    if (calculationMethod === 'IN') {
        return utils.formatYear(getYearIN(year, month, day), format);
    }
    var banglaYear = year - 593;
    if (month < 3 || (month === 3 && day < 14)) {
        banglaYear = year - 594;
    }
    if (banglaYear < 1) {
        throw new Error(utils.errorMessage);
    }
    return utils.formatYear(banglaYear, format);
}

exports.getYear = getYear;
