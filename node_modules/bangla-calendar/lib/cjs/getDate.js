'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var getDay = require('./getDay.js');
var getMonth = require('./getMonth.js');
var getWeekDay = require('./getWeekDay.js');
var getYear = require('./getYear.js');
var utils = require('./utils.js');

function getDate(date, options) {
    if (date === void 0) { date = new Date(); }
    if (options === void 0) { options = {
        format: 'eeee, D MMMM, YYYY',
        calculationMethod: 'BD'
    }; }
    if (!utils.isValidDate(date)) {
        throw new Error(utils.errorMessage);
    }
    var inputDate = new Date(date);
    inputDate.setTime(inputDate.getTime() + (inputDate.getTimezoneOffset() + 360) * 60 * 1000);
    var _a = options.format, format = _a === void 0 ? 'eeee, D MMMM, YYYY' : _a, _b = options.calculationMethod, calculationMethod = _b === void 0 ? 'BD' : _b;
    var formattedDate = format.replace(/eeee|eee/gi, function (fmt) {
        switch (fmt) {
            case 'eee':
                return getWeekDay.getWeekDay(inputDate, { format: 'eee', calculationMethod: calculationMethod });
            default:
                return getWeekDay.getWeekDay(inputDate, { calculationMethod: calculationMethod });
        }
    });
    formattedDate = formattedDate.replace(/DD|D/gi, function (fmt) {
        switch (fmt) {
            case 'DD':
                return getDay.getDay(inputDate, { format: 'DD', calculationMethod: calculationMethod });
            default:
                return getDay.getDay(inputDate, { calculationMethod: calculationMethod });
        }
    });
    formattedDate = formattedDate.replace(/MMMM|MM|M/gi, function (fmt) {
        switch (fmt) {
            case 'M':
                return getMonth.getMonth(inputDate, { format: 'M', calculationMethod: calculationMethod });
            case 'MM':
                return getMonth.getMonth(inputDate, { format: 'MM', calculationMethod: calculationMethod });
            default:
                return getMonth.getMonth(inputDate, { calculationMethod: calculationMethod });
        }
    });
    formattedDate = formattedDate.replace(/YYYYb|YYYY|YY/gi, function (fmt) {
        switch (fmt) {
            case 'YY':
                return getYear.getYear(inputDate, { format: 'YY', calculationMethod: calculationMethod });
            case 'YYYYb':
                return getYear.getYear(inputDate, { format: 'YYYYb', calculationMethod: calculationMethod });
            default:
                return getYear.getYear(inputDate, { calculationMethod: calculationMethod });
        }
    });
    return formattedDate;
}

exports.getDate = getDate;
